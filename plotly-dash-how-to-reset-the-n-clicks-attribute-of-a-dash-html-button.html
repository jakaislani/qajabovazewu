<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=robots content="index,follow,noarchive"><title>Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button? - BlogNews</title><meta name=description content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can't figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button"><meta name=author content="Some Person"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"BlogNews","url":"\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"\/plotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html","name":"Plotly dash how to reset the \u0026quot;n clicks\u0026quot; attribute of a dash html.button?"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Larita Shotwell"},"headline":"Plotly Dash: How to reset the \u0026quot;n_clicks\u0026quot; attribute of a dash-html.button?","description":"I have a basic datatable in plotly\/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can\u0027t figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button","inLanguage":"en","wordCount":534,"datePublished":"2024-06-11T00:00:00","dateModified":"2024-06-11T00:00:00","image":"\/img\/avatar-icon.png","keywords":[""],"mainEntityOfPage":"\/plotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html","publisher":{"@type":"Organization","name":"\/","logo":{"@type":"ImageObject","url":"\/img\/avatar-icon.png","height":60,"width":60}}}</script><meta property="og:title" content="Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button?"><meta property="og:description" content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can't figure out how to get the n_clicks attribute of the button back to zero. So what happens is that after I clicked the button"><meta property="og:image" content="/img/avatar-icon.png"><meta property="og:url" content="/plotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html"><meta property="og:type" content="website"><meta property="og:site_name" content="BlogNews"><meta name=twitter:title content="Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a …"><meta name=twitter:description content="I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button. The issue is, that I can't figure out how to get the n_clicks …"><meta name=twitter:image content="/img/avatar-icon.png"><meta name=twitter:card content="summary"><meta name=twitter:site content="@username"><meta name=twitter:creator content="@username"><link href=./img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.98.0"><link rel=alternate href=./index.xml type=application/rss+xml title=BlogNews><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://assets.cdnweb.info/hugo/bh/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/bh/css/highlight.min.css><link rel=stylesheet href=https://assets.cdnweb.info/hugo/bh/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous></head><body><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Plotly Dash: How to reset the &amp;quot;n_clicks&amp;quot; attribute of a dash-html.button?</h1><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Posted on June 11, 2024
&nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;3&nbsp;minutes
&nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;534&nbsp;words
&nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Larita Shotwell</span></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><img src=https://cdn.statically.io/img/cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>I have a basic datatable in plotly/dash. My goal is to upload (or print for the sake of the example...) after I press the upload-button.</p><p>The issue is, that I can't figure out how to get the <code>n_clicks</code> attribute of the button back to zero. So what happens is that after I clicked the button for the first time it prints continuously whenever something changes (row added or number changed/added), but what I want is for it to print only once whenever I click the button.</p><p>This is the code:</p><pre><code>import dash from dash.dependencies import Input, Output, State import dash_table import dash_daq as daq import dash_core_components as dcc import dash_html_components as html import pandas as pd external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css'] df = pd.read_csv('.../dummy_csv.csv') app = dash.Dash(__name__) app.layout = html.Div([ html.Div(id='my-div'), dash_table.DataTable( id='adding-rows-table', style_data={ 'whiteSpace': 'normal', 'height': 'auto' }, style_table={ 'maxHeight': '800px' , 'overflowY': 'scroll' }, columns=[ {'name': i, 'id': i} for i in df.columns ], data=df.to_dict('records'), editable=True, row_deletable=True ), html.Button('+ Row', id='editing-rows-button', n_clicks=0), html.Button('Update', id='btn-nclicks-1', n_clicks=0 ), ]) @app.callback( Output(component_id='my-div', component_property='children'), [Input('btn-nclicks-1', 'n_clicks'), Input('adding-rows-table', 'data')] ) def update_output_div(n_clicks, data): if n_clicks &gt; 0: print(data) # n_clicks = 0 # return n_clicks else: print("else loop") @app.callback( Output('adding-rows-table', 'data'), [Input('editing-rows-button', 'n_clicks')], [State('adding-rows-table', 'data'), State('adding-rows-table', 'columns')]) def add_row(n_clicks, rows, columns): if n_clicks &gt; 0: rows.append({c['id']: '' for c in columns}) return rows if __name__ == '__main__': app.run_server(debug=True) </code></pre><p>This the CSV:</p><pre><code>a,b,c,d 1,1,5,1 2,2,5,1 2,33,6,2 3,4,6,2 </code></pre><p>And <a href=# rel="nofollow noreferrer">this</a> is the "faulty" output.</p><span class=d-none itemprop=commentCount></span><h2 class=mb0 data-answercount=3>3 Answers</h2><p>You could use the <code>dash.callback_context</code> property to trigger the callback only when the number of clicks has changed rather than after the first click. See the section on "Determining which Button Changed with callback_context" in the <a href=# rel="nofollow noreferrer">Dash documentation</a>. The following is an example of how you could update your callback.</p><pre><code>@app.callback(Output(component_id='my-div', component_property='children'), [Input('btn-nclicks-1', 'n_clicks'), Input('adding-rows-table', 'data')]) def update_output_div(n_clicks, data): changed_id = [p['prop_id'] for p in dash.callback_context.triggered][0] if 'btn-nclicks-1' in changed_id: print(data) # n_clicks = 0 # return n_clicks else: print("else loop") </code></pre><span class=d-none itemprop=commentCount>2</span><p>You can reset the <code>n_clicks=None</code> attribute, and it won't trigger an infinite loop when used in combination with a <code>PreventUpdate</code> null condition that you are probably already using.</p><pre><code>@callback( Output('some_btn', 'n_clicks'), Input('some_btn', 'n_clicks') ) def upon_click(n_clicks): if (n_clicks is None): raise PreventUpdate print(n_clicks)#1 return None </code></pre><p>It's a bit more explicit and faster than <code>callback_context</code> 🤷‍♂️ For example, my button's <code>id</code> contained a complex "pattern-matching callback" so I didn't want to parse the callback context for that id</p><span class=d-none itemprop=commentCount></span><p>An option that worked for me is: <code>n_clicks = 0</code> in the button declaration. create list and add click data, then check if next index is greater than current index.</p><p>An approximate example with your code would be:</p><pre><code>list_clicks = [] @app.callback( Output('adding-rows-table', 'data'), [Input('editing-rows-button', 'n_clicks')], [State('adding-rows-table', 'data'), State('adding-rows-table', 'columns')]) def add_row(n_clicks, rows, columns): list_clicks.append(n_clicks) for index in range(len(list_clicks)-1): if list_clicks[index + 1] &gt; list_clicks[index]: list_clicks.clear() rows.append({c['id']: '' for c in columns}) return rows </code></pre><p>clicking on the button n_clicks is increased by 1. What the code block does is compare if the current index is greater than the previous one. If it is greater, it means that the button was clicked.</p><p><code>list_clicks.clear()</code> it is to clean the list and not iterate over the same passed values.</p><p>maybe you could adapt it better to your code!</p><span class=d-none itemprop=commentCount></span><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmirpJawrLvVnqmfpJ%2Bse6S7zGiorp2jqbawutJobWtuZ2Z%2Fc4KOqaOorJyueqWt0qFkoaenYsGwedGeqp6sXam1pnnNZpqloZOgwG6t062popqlqbJuu8VmmGackai1brTTpqNmmqWpwbC6</p><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=%2fplotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html&text=Plotly%20Dash%3a%20How%20to%20reset%20the%20%26quot%3bn_clicks%26quot%3b%20attribute%20of%20a%20dash-html.button%3f&via=username" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=%2fplotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=%2fplotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html&title=Plotly%20Dash%3a%20How%20to%20reset%20the%20%26quot%3bn_clicks%26quot%3b%20attribute%20of%20a%20dash-html.button%3f" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=%2fplotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html&title=Plotly%20Dash%3a%20How%20to%20reset%20the%20%26quot%3bn_clicks%26quot%3b%20attribute%20of%20a%20dash-html.button%3f" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=%2fplotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html&title=Plotly%20Dash%3a%20How%20to%20reset%20the%20%26quot%3bn_clicks%26quot%3b%20attribute%20of%20a%20dash-html.button%3f" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=%2fplotly-dash-how-to-reset-the-n-clicks-attribute-of-a-dash-html-button.html&description=Plotly%20Dash%3a%20How%20to%20reset%20the%20%26quot%3bn_clicks%26quot%3b%20attribute%20of%20a%20dash-html.button%3f" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section></article><ul class="pager blog-pager"><li class=previous><a href=./all-of-sarah-j-maas-books-in-order-listed.html data-toggle=tooltip data-placement=top title="All of Sarah J. Maas books in order, listed">&larr; Previous Post</a></li><li class=next><a href=./natasza-urbanska.html data-toggle=tooltip data-placement=top title="Natasza Urbanska">Next Post &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">All rights reserved
&nbsp;&bull;&nbsp;&copy;
2024
&nbsp;&bull;&nbsp;
<a href=./>BlogNews</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.98.0</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script>
<script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://assets.cdnweb.info/hugo/bh/js/main.js></script>
<script src=https://assets.cdnweb.info/hugo/bh/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script>renderMathInElement(document.body)</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://assets.cdnweb.info/hugo/bh/js/load-photoswipe.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://iklan.listspress.com/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>